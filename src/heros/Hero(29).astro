---
const { whatsappLink1, whatsappLink2, pixelEvent } = Astro.props;
import '../styles/global.css';
---
<section class="relative h-screen flex items-center justify-center bg-casino-purple overflow-hidden w-full">
  <div class="hero-container">
    <!-- Fondo -->
    <div class="hero-background">
      <img src="/Hero(29)/fondo.jpg" alt="Fondo">
    </div>
    
    <!-- Logo Vegas -->
    <img class="hero-logo-vegas" src="/Hero(29)/LOGO_VEGAS.png" alt="Logo Vegas">
    
    <!-- Abierto 24HS -->
    <img class="hero-abierto24" src="/Hero(29)/ABIERTO24HS.png" alt="Abierto 24HS">
    
    <!-- Cuadrados juntos (Game icons) -->
    <img class="hero-cuadrados" src="/Hero(29)/cuadrados_juntos.png" alt="Cuadrados">
    
    <!-- Botón WhatsApp -->
    <a href={whatsappLink1} id="whatsapp-btn-1" class="hero-whatsapp-btn">
      <img src="/Hero(29)/BOTON_WHATSAPP.png" alt="Botón WhatsApp">
    </a>
    
    <!-- Mujer/Pibe -->
    <img class="hero-pibe" src="/Hero(29)/pibe.png" alt="Pibe">
    
    <!-- +18 -->
    <img class="hero-plus18" src="/Hero(29)/+18.png" alt="+18">
    
    <!-- Monedas (distributed around) -->
    <img class="hero-moneda1" src="/Hero(29)/MONEDA1.png" alt="Moneda 1">
    <img class="hero-moneda1-top" src="/Hero(29)/MONEDA1.png" alt="Moneda 1 Top">
    <img class="hero-moneda2" src="/Hero(29)/moneda2.png" alt="Moneda 2">
    <img class="hero-moneda3" src="/Hero(29)/moneda3.png" alt="Moneda 3">
    <img class="hero-moneda3-top" src="/Hero(29)/moneda3.png" alt="Moneda 3 Top">
  </div>
</section>

<style>
  .hero-container {
    position: relative;
    width: 100%;
    max-width: 430px;
    height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    overflow: visible;
    z-index: 2;
  }
  
  .hero-background {
    position: absolute;
    top: 0;
    left: 50%;
    width: 100vw;
    height: 100%;
    transform: translateX(-50%);
    z-index: 1;
  }
  
  .hero-background img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }
  
  .hero-pibe {
    position: absolute;
    width: auto;
    height: 50vh;
    bottom: 0;
    left: 50;
    z-index: 4;
  }
  
  .hero-whatsapp-btn {
    position: absolute;
    width: 90%;
    max-width: 421px;
    height: 70px;
    left: 50%;
    top: 45%;
    transform: translate(-50%, -50%);
    z-index: 6;
  }
  
  .hero-whatsapp-btn img {
    width: 100%;
    height: 100%;
    object-fit: contain;
    animation: float 3s infinite ease-in-out;
    filter: drop-shadow(0 0 8px rgba(211, 37, 205, 0.8));
  }
  
  .hero-whatsapp-btn:hover {
    filter: drop-shadow(0 0 12px rgb(211, 37, 208)) brightness(1.1);
    transform: scale(1.05);
  }
  
  .hero-cuadrados {
    position: absolute;
    width: 100%;
    max-width: 499px;
    top: 20%;
    left: 50%;
    transform: translateX(-50%);
    z-index: 4;
  }
  
  .hero-plus18 {
    position: absolute;
    width: 8vh;
    height: 8vh;
    right: 2%;
    top: 2%;
    z-index: 5;
  }
  
  .hero-abierto24 {
    position: absolute;
    width: 90%;
    max-width: 421px;
    top: 12%;
    left: 50%;
    transform: translateX(-50%);
    z-index: 4;
  }
  
  .hero-logo-vegas {
    position: absolute;
    width: 194px;
    height: 51px;
    bottom: 2%;
    left: 50%;
    transform: translateX(-50%);
    z-index: 5;
  }
  
  .hero-moneda1 {
    position: absolute;
    width: 118px;
    height: 83px;
    right: 20px;
    bottom: 25%;
    z-index: 1;
    animation: float 3s infinite ease-in-out;
  }
  
  .hero-moneda1-top {
    position: absolute;
    width: 120px;
    height: 120px;
    left: -5%;
    top: -5%;
    z-index: 3;
    transform: rotate(15deg);
    animation: float 4s infinite ease-in-out;
  }
  
  .hero-moneda2 {
    position: absolute;
    width: 93px;
    height: 98px;
    left: 10%;
    top: 50%;
    z-index: 1;
    animation: float 5s infinite ease-in-out;
  }
  
  .hero-moneda3 {
    position: absolute;
    width: 110px;
    height: 129px;
    right: -5%;
    top: -5%;
    z-index: 1;
    animation: float 3.5s infinite ease-in-out;
  }
  
  .hero-moneda3-top {
    position: absolute;
    width: 100px;
    height: 100px;
    left: 40%;
    top: -5%;
    z-index: 3;
    transform: rotate(110deg);
    animation: float 4.5s infinite ease-in-out;
  }
  
  @keyframes float {
    0%, 100% {
      transform: translateY(0);
    }
    50% {
      transform: translateY(-15px);
    }
  }
  
  /* Responsive adjustments */
  @media (max-width: 768px) {
    .hero-container {
      width: 100%;
    }
  }
</style>

<script define:vars={{ pixelEvent }}>
  document.addEventListener('DOMContentLoaded', () => {
    // Para depuración
    console.log('Pixel event disponible:', pixelEvent);
    
    // Obtener los botones
    const whatsappBtn1 = document.getElementById('whatsapp-btn-1');
    const whatsappBtn2 = document.getElementById('whatsapp-btn-2');
    
    // Función para manejar el clic y enviar evento de Pixel
    const handleButtonClick = (e, btnElement) => {
      e.preventDefault();
      
      // Usar una variable local para el evento
      const eventToTrack = pixelEvent || 'Lead';
      
      // Imprimir para depuración
      console.log('Tracking event:', eventToTrack);
      
      // Enviar el evento si fbq está disponible
      if (typeof fbq === 'function') {
        fbq('track', eventToTrack);
      }
      
      // Navegar después de un pequeño retraso
      setTimeout(() => {
        window.location.href = btnElement.href;
      }, 300);
    };
    
    // Agregar event listeners a ambos botones
    if (whatsappBtn1) {
      whatsappBtn1.addEventListener('click', (e) => handleButtonClick(e, whatsappBtn1));
    }
    
    if (whatsappBtn2) {
      whatsappBtn2.addEventListener('click', (e) => handleButtonClick(e, whatsappBtn2));
    }
  });
</script>